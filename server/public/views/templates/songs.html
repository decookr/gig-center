<div ng-include="'views/partials/nav.html'"></div>
<div class="container">
    <div>
        <h2>Add Song</h2>
        <form ng-submit="sc.addSong(sc.songs)">
            <div>
                <input type="text" ng-model="sc.songs.title" placeholder="Title" />

                <input type="text" ng-model="sc.songs.artist" placeholder="Artist" />

                <input type="text" ng-model="sc.songs.length" placeholder="Length" />

                <input type="number" ng-model="sc.songs.bpm" placeholder="BPM" />

                <input type="text" ng-model="sc.songs.key" placeholder="Key" />
                <br>
                <input type="text" ng-model="sc.songs.recording_url" placeholder="Recording Link" />
            </div>
            <input class="btn btn-default" type="submit" name="submit" value="Add Song" />
        </form>
    </div>
    <div>
        <h2>Song List</h2>
        <button ng-hide="add.addToGig" ng-click="add.addToGig = !add.addToGig">Create A Setlist</button>
        <button ng-show="add.addToGig" ng-click="add.addToGig = !add.addToGig">Done Adding Songs</button>
        <div ng-controller="GigController as gc">
            <select ng-show="add.addToGig" ng-model="sc.songToAdd.gig_id" name="gig" id="gigLocation">
                <option ng-repeat="gig in gc.gigs.list" ng-value="{{gig.id}}">{{gig.location}}</option>
            </select>
        </div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Artist</th>
                    <th>Length</th>
                    <th>BPM</th>
                    <th>Key</th>
                    <th>Play</th>
                    <th>
                        <button ng-hide="song.isEditable" ng-click="song.isEditable = !song.isEditable">Edit</button>
                    </th>
                    <th ng-show="add.addToGig">Add To Gig</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="song in sc.songs.list">
                    <td>
                        <span ng-hide="song.isEditable">{{song.title}}</span>
                        <input ng-show="song.isEditable" type="text" ng-model="song.title">
                    </td>
                    <td>
                        <span ng-hide="song.isEditable">{{song.artist}}</span>
                        <input ng-show="song.isEditable" type="text" ng-model="song.artist">
                    </td>
                    <td>
                        <span ng-hide="song.isEditable">{{song.length}}</span>
                        <input ng-show="song.isEditable" type="text" ng-model="song.length">
                    </td>
                    <td>
                        <span ng-hide="song.isEditable">{{song.bpm}}</span>
                        <input ng-show="song.isEditable" type="text" ng-model="song.bpm">
                    </td>
                    <td>
                        <span ng-hide="song.isEditable">{{song.key}}</span>
                        <input ng-show="song.isEditable" type="text" ng-model="song.key">
                    </td>
                    <td>
                        <span ng-hide="song.isEditable">
                            <a ng-href="{{song.recording_url}}" target="_blank">
                                <span class="glyphicon glyphicon-play-circle" aria-hidden="true"></span>
                            </a>
                        </span>
                        <input ng-show="song.isEditable" type="text" ng-model="song.recording_url">
                    </td>
                    <td>
                        <input type="checkbox" id="{{song.id}}" ng-show="add.addToGig" ng-model="sc.songToAdd.song_id" ng-true-value="{{song.id}}"
                            ng-change="sc.addSongsToGig(sc.songToAdd)">
                        <!-- <span ng-show="add.songAdded">Added!</span> -->
                    </td>
                    <td>
                        <button ng-hide="song.isEditable" ng-click="song.isEditable = !song.isEditable">Edit</button>
                        <button ng-show="song.isEditable" ng-click="sc.editSong(song)">Save</button>
                    </td>
                    <td>
                        <button ng-click="sc.deleteSong(song)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>